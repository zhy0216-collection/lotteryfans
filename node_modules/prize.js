_ = require("underscore");
swig = require("swig");
$ = global.$;





function ThirdPrize(image, degree){
    var self = this;
    self.tpl = swig.compile($("#prizeTemplate").html());
    self.curSlide = null;
    self.numbersTpl = swig.compile($("#numbersTemplate").html());

    self.init = function(image, degree){
        self.image = image || "./res/hm.jpg";
        self.degree = 3;
    }

    self.show = function(){
        var content = self.tpl({prize:self});
        var $container = $("#container");
        $container.html(content);
        // $(".prize-show", $container).hide();
        self.curSlide = $(".slide", $container).first();
    }

    self.showPrizeProcess = function(){
        var $container = $("#container");
        $(".slide", $container).first().hide().next().show();
    }

    self.showPrizePreview = function(){
        var $container = $("#container");
        $(".slide", $container).first().show().next().hide();
    }

    self.run = function(running){
        if(running){
            window.clearInterval(running);
            // if third prize 1 choose
            // _randomSelect();
            // peopleList.save();
            running = false;
        }else{
            running = window.setInterval(function(){

                        self._randomNumberGen();


          }, 1)
        }
        return running
    }

    self.numbers = function(){
        return _.range(5);
    }

    self.randomNumber = function(){
        return _.sample(_.range(9 +1))
    }

    self._randomNumberGen = function(){
        var content = self.numbersTpl({prize:self});
        $(".prize-program").html(content)
    }


    self.init(image, degree);

    return self

}






exports.ThirdPrize = ThirdPrize;


